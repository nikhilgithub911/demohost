{"ast":null,"code":"import _regeneratorRuntime from\"/home/rapidsoft/Desktop/demohost/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/rapidsoft/Desktop/demohost/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/rapidsoft/Desktop/demohost/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useRef,useState}from\"react\";import Webcam from\"react-webcam\";import axios from\"axios\";import CameraAltIcon from'@mui/icons-material/CameraAlt';import CheckCircleIcon from'@mui/icons-material/CheckCircle';import CancelIcon from'@mui/icons-material/Cancel';import\"./WebcamImage.css\";import{Box,Button}from\"@mui/material\";import FormDataContext from\"../GlobalContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function WebcamImage(_ref){var onCloseModal=_ref.onCloseModal,onImageCapture=_ref.onImageCapture;var _useContext=useContext(FormDataContext),setStep=_useContext.setStep,handleSubmit=_useContext.handleSubmit;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),img=_useState2[0],setImg=_useState2[1];var webcamRef=useRef(null);var videoConstraints={width:420,height:420,facingMode:\"user\"};var capture=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var imageSrc,binaryData,array,i,imageBlob,formData,url,response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:imageSrc=webcamRef.current.getScreenshot();binaryData=atob(imageSrc.split(\",\")[1]);array=new Uint8Array(binaryData.length);for(i=0;i<binaryData.length;i++){array[i]=binaryData.charCodeAt(i);}imageBlob=new Blob([array],{type:\"image/jpeg\"});formData=new FormData();formData.append(\"image\",imageBlob,\"image.jpg\");url=\"http://192.168.12.54:8080/vis/upload\";_context.prev=8;_context.next=11;return axios.post(url,formData,{headers:{\"Content-Type\":\"multipart/form-data\"}});case 11:response=_context.sent;localStorage.setItem(\"capturedImageURL\",response.data.data);console.log(response);console.log(\"Image captured and URL stored in local storage\");console.log(\"image captured\");_context.next=21;break;case 18:_context.prev=18;_context.t0=_context[\"catch\"](8);console.error(\"Error sending image:\",_context.t0);case 21:setImg(imageSrc);case 22:case\"end\":return _context.stop();}},_callee,null,[[8,18]]);}));return function capture(){return _ref2.apply(this,arguments);};}();var handleCheckIconClick=function handleCheckIconClick(){// Check if an image is captured before closing the modal\nif(img){// Store the image in local storage\n// localStorage.setItem(\"capturedImageURL\", img);\nonImageCapture(img);// Close the modal\nonCloseModal();// \n}};return/*#__PURE__*/_jsxs(\"div\",{className:\"Container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"webcam-container\",children:[/*#__PURE__*/_jsx(Webcam,{audio:false,mirrored:true,height:window.innerWidth<600?250:400,width:window.innerWidth<600?300:400,ref:webcamRef,screenshotFormat:\"image/jpeg\"// videoConstraints={videoConstraints}\n}),/*#__PURE__*/_jsxs(Box,{sx:{display:\"flex\",justifyContent:\"space-evenly\"},children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return setImg(null);},style:{width:\"10%\",cursor:\"pointer\"},children:/*#__PURE__*/_jsx(CancelIcon,{})}),/*#__PURE__*/_jsxs(\"button\",{onClick:capture,style:{width:\"10%\",cursor:\"pointer\"},children:[\" \",/*#__PURE__*/_jsx(CameraAltIcon,{}),\" \"]}),img&&/*#__PURE__*/_jsxs(\"button\",{onClick:handleCheckIconClick,style:{width:\"10%\",cursor:\"pointer\"},children:[\" \",/*#__PURE__*/_jsx(CheckCircleIcon,{}),\" \"]})]})]}),img&&/*#__PURE__*/_jsx(\"div\",{className:\"image-container\",children:/*#__PURE__*/_jsx(\"img\",{src:img,alt:\"screenshot\",style:{position:\"absolute\",//  top: 34,\n// left: 4,\nleft:window.innerWidth<600?4:25,top:window.innerWidth<600?45:78,zIndex:2}})})]});}export default WebcamImage;// style={{\n//   position: \"absolute\",\n//   top: 0,\n//   left: 0,\n//   width: \"100%\",\n//   height: \"100%\",\n//   zIndex: 1,\n//   display: \"flex\",\n//   justifyContent: \"center\",\n//   alignItems: \"center\",\n// }}","map":{"version":3,"names":["React","useContext","useRef","useState","Webcam","axios","CameraAltIcon","CheckCircleIcon","CancelIcon","Box","Button","FormDataContext","jsx","_jsx","jsxs","_jsxs","WebcamImage","_ref","onCloseModal","onImageCapture","_useContext","setStep","handleSubmit","_useState","_useState2","_slicedToArray","img","setImg","webcamRef","videoConstraints","width","height","facingMode","capture","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","imageSrc","binaryData","array","i","imageBlob","formData","url","response","wrap","_callee$","_context","prev","next","current","getScreenshot","atob","split","Uint8Array","length","charCodeAt","Blob","type","FormData","append","post","headers","sent","localStorage","setItem","data","console","log","t0","error","stop","apply","arguments","handleCheckIconClick","className","children","audio","mirrored","window","innerWidth","ref","screenshotFormat","sx","display","justifyContent","onClick","style","cursor","src","alt","position","left","top","zIndex"],"sources":["/home/rapidsoft/Desktop/demohost/src/components/WebcamImage.jsx"],"sourcesContent":["import React, { useContext, useRef, useState } from \"react\";\nimport Webcam from \"react-webcam\";\nimport axios from \"axios\";\nimport CameraAltIcon from '@mui/icons-material/CameraAlt';\nimport CheckCircleIcon from '@mui/icons-material/CheckCircle';\nimport CancelIcon from '@mui/icons-material/Cancel';\nimport \"./WebcamImage.css\"\nimport { Box, Button } from \"@mui/material\";\nimport FormDataContext from \"../GlobalContext\";\n\nfunction WebcamImage({ onCloseModal, onImageCapture }) {\n\n  \n\n  const { setStep,handleSubmit } = useContext(FormDataContext)\n  const [img, setImg] = useState(null);\n  const webcamRef = useRef(null);\n\n  const videoConstraints = {\n    width: 420,\n    height: 420,\n    facingMode: \"user\",\n  };\n\n  const capture = async () => {\n    const imageSrc = webcamRef.current.getScreenshot();\n\n    const binaryData = atob(imageSrc.split(\",\")[1]);\n    const array = new Uint8Array(binaryData.length);\n    for (let i = 0; i < binaryData.length; i++) {\n      array[i] = binaryData.charCodeAt(i);\n    }\n\n    const imageBlob = new Blob([array], { type: \"image/jpeg\" });\n\n    const formData = new FormData();\n    formData.append(\"image\", imageBlob, \"image.jpg\");\n\n    const url = \"http://192.168.12.54:8080/vis/upload\"\n    try {\n      const response = await axios.post(url, formData, {\n        headers: {\n          \"Content-Type\": \"multipart/form-data\",\n        },\n      });\n\n      localStorage.setItem(\"capturedImageURL\", response.data.data);\n\n      console.log(response);\n      console.log(\"Image captured and URL stored in local storage\");\n      console.log(\"image captured\")\n    } catch (error) {\n      console.error(\"Error sending image:\", error);\n    }\n\n    setImg(imageSrc);\n  };\n\n  const handleCheckIconClick = () => {\n    // Check if an image is captured before closing the modal\n    if (img) {\n      // Store the image in local storage\n      // localStorage.setItem(\"capturedImageURL\", img);\n      onImageCapture(img);\n\n      // Close the modal\n      onCloseModal();\n      // \n    }\n  };\n\n  return (\n    <div className=\"Container\">\n      <div className=\"webcam-container\">\n        <Webcam\n          audio={false}\n          mirrored={true}\n          height={window.innerWidth < 600 ? 250 : 400}\n          width={window.innerWidth < 600 ? 300 : 400}\n          ref={webcamRef}\n          screenshotFormat=\"image/jpeg\"\n          // videoConstraints={videoConstraints}\n        />\n        <Box sx={{ display: \"flex\", justifyContent: \"space-evenly\" }}>\n          <button onClick={() => setImg(null)} style={{ width: \"10%\",cursor: \"pointer\" }}><CancelIcon /></button>\n          <button onClick={capture} style={{ width: \"10%\",cursor: \"pointer\" }}> <CameraAltIcon /> </button>\n          {img && <button onClick={handleCheckIconClick} style={{ width: \"10%\" ,cursor: \"pointer\"}}> <CheckCircleIcon /> </button>}\n        </Box>\n      </div>\n      {img && (\n        <div className=\"image-container\">\n          <img src={img} alt=\"screenshot\"\n            style={{ position: \"absolute\",\n            //  top: 34,\n              // left: 4,\n              left: window.innerWidth < 600 ? 4 : 25,\n              top: window.innerWidth < 600 ? 45 : 78,\n              zIndex: 2 }}\n          />\n        </div>\n      )}\n\n     \n    </div>\n  );\n}\n\nexport default WebcamImage;\n\n\n// style={{\n//   position: \"absolute\",\n//   top: 0,\n//   left: 0,\n//   width: \"100%\",\n//   height: \"100%\",\n//   zIndex: 1,\n//   display: \"flex\",\n//   justifyContent: \"center\",\n//   alignItems: \"center\",\n// }} "],"mappings":"kXAAA,MAAO,CAAAA,KAAK,EAAIC,UAAU,CAAEC,MAAM,CAAEC,QAAQ,KAAQ,OAAO,CAC3D,MAAO,CAAAC,MAAM,KAAM,cAAc,CACjC,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,aAAa,KAAM,+BAA+B,CACzD,MAAO,CAAAC,eAAe,KAAM,iCAAiC,CAC7D,MAAO,CAAAC,UAAU,KAAM,4BAA4B,CACnD,MAAO,mBAAmB,CAC1B,OAASC,GAAG,CAAEC,MAAM,KAAQ,eAAe,CAC3C,MAAO,CAAAC,eAAe,KAAM,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE/C,QAAS,CAAAC,WAAWA,CAAAC,IAAA,CAAmC,IAAhC,CAAAC,YAAY,CAAAD,IAAA,CAAZC,YAAY,CAAEC,cAAc,CAAAF,IAAA,CAAdE,cAAc,CAIjD,IAAAC,WAAA,CAAiCnB,UAAU,CAACU,eAAe,CAAC,CAApDU,OAAO,CAAAD,WAAA,CAAPC,OAAO,CAACC,YAAY,CAAAF,WAAA,CAAZE,YAAY,CAC5B,IAAAC,SAAA,CAAsBpB,QAAQ,CAAC,IAAI,CAAC,CAAAqB,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA7BG,GAAG,CAAAF,UAAA,IAAEG,MAAM,CAAAH,UAAA,IAClB,GAAM,CAAAI,SAAS,CAAG1B,MAAM,CAAC,IAAI,CAAC,CAE9B,GAAM,CAAA2B,gBAAgB,CAAG,CACvBC,KAAK,CAAE,GAAG,CACVC,MAAM,CAAE,GAAG,CACXC,UAAU,CAAE,MACd,CAAC,CAED,GAAM,CAAAC,OAAO,6BAAAC,KAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAA,MAAAC,QAAA,CAAAC,UAAA,CAAAC,KAAA,CAAAC,CAAA,CAAAC,SAAA,CAAAC,QAAA,CAAAC,GAAA,CAAAC,QAAA,QAAAV,mBAAA,GAAAW,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SACRZ,QAAQ,CAAGX,SAAS,CAACwB,OAAO,CAACC,aAAa,CAAC,CAAC,CAE5Cb,UAAU,CAAGc,IAAI,CAACf,QAAQ,CAACgB,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CACzCd,KAAK,CAAG,GAAI,CAAAe,UAAU,CAAChB,UAAU,CAACiB,MAAM,CAAC,CAC/C,IAASf,CAAC,CAAG,CAAC,CAAEA,CAAC,CAAGF,UAAU,CAACiB,MAAM,CAAEf,CAAC,EAAE,CAAE,CAC1CD,KAAK,CAACC,CAAC,CAAC,CAAGF,UAAU,CAACkB,UAAU,CAAChB,CAAC,CAAC,CACrC,CAEMC,SAAS,CAAG,GAAI,CAAAgB,IAAI,CAAC,CAAClB,KAAK,CAAC,CAAE,CAAEmB,IAAI,CAAE,YAAa,CAAC,CAAC,CAErDhB,QAAQ,CAAG,GAAI,CAAAiB,QAAQ,CAAC,CAAC,CAC/BjB,QAAQ,CAACkB,MAAM,CAAC,OAAO,CAAEnB,SAAS,CAAE,WAAW,CAAC,CAE1CE,GAAG,CAAG,sCAAsC,CAAAI,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA,UAEzB,CAAA9C,KAAK,CAAC0D,IAAI,CAAClB,GAAG,CAAED,QAAQ,CAAE,CAC/CoB,OAAO,CAAE,CACP,cAAc,CAAE,qBAClB,CACF,CAAC,CAAC,SAJIlB,QAAQ,CAAAG,QAAA,CAAAgB,IAAA,CAMdC,YAAY,CAACC,OAAO,CAAC,kBAAkB,CAAErB,QAAQ,CAACsB,IAAI,CAACA,IAAI,CAAC,CAE5DC,OAAO,CAACC,GAAG,CAACxB,QAAQ,CAAC,CACrBuB,OAAO,CAACC,GAAG,CAAC,gDAAgD,CAAC,CAC7DD,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAC,CAAArB,QAAA,CAAAE,IAAA,kBAAAF,QAAA,CAAAC,IAAA,IAAAD,QAAA,CAAAsB,EAAA,CAAAtB,QAAA,aAE7BoB,OAAO,CAACG,KAAK,CAAC,sBAAsB,CAAAvB,QAAA,CAAAsB,EAAO,CAAC,CAAC,QAG/C5C,MAAM,CAACY,QAAQ,CAAC,CAAC,yBAAAU,QAAA,CAAAwB,IAAA,MAAAnC,OAAA,iBAClB,kBAhCK,CAAAL,OAAOA,CAAA,SAAAC,KAAA,CAAAwC,KAAA,MAAAC,SAAA,OAgCZ,CAED,GAAM,CAAAC,oBAAoB,CAAG,QAAvB,CAAAA,oBAAoBA,CAAA,CAAS,CACjC;AACA,GAAIlD,GAAG,CAAE,CACP;AACA;AACAP,cAAc,CAACO,GAAG,CAAC,CAEnB;AACAR,YAAY,CAAC,CAAC,CACd;AACF,CACF,CAAC,CAED,mBACEH,KAAA,QAAK8D,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxB/D,KAAA,QAAK8D,SAAS,CAAC,kBAAkB,CAAAC,QAAA,eAC/BjE,IAAA,CAACT,MAAM,EACL2E,KAAK,CAAE,KAAM,CACbC,QAAQ,CAAE,IAAK,CACfjD,MAAM,CAAEkD,MAAM,CAACC,UAAU,CAAG,GAAG,CAAG,GAAG,CAAG,GAAI,CAC5CpD,KAAK,CAAEmD,MAAM,CAACC,UAAU,CAAG,GAAG,CAAG,GAAG,CAAG,GAAI,CAC3CC,GAAG,CAAEvD,SAAU,CACfwD,gBAAgB,CAAC,YACjB;AAAA,CACD,CAAC,cACFrE,KAAA,CAACN,GAAG,EAAC4E,EAAE,CAAE,CAAEC,OAAO,CAAE,MAAM,CAAEC,cAAc,CAAE,cAAe,CAAE,CAAAT,QAAA,eAC3DjE,IAAA,WAAQ2E,OAAO,CAAE,SAAAA,QAAA,QAAM,CAAA7D,MAAM,CAAC,IAAI,CAAC,EAAC,CAAC8D,KAAK,CAAE,CAAE3D,KAAK,CAAE,KAAK,CAAC4D,MAAM,CAAE,SAAU,CAAE,CAAAZ,QAAA,cAACjE,IAAA,CAACL,UAAU,GAAE,CAAC,CAAQ,CAAC,cACvGO,KAAA,WAAQyE,OAAO,CAAEvD,OAAQ,CAACwD,KAAK,CAAE,CAAE3D,KAAK,CAAE,KAAK,CAAC4D,MAAM,CAAE,SAAU,CAAE,CAAAZ,QAAA,EAAC,GAAC,cAAAjE,IAAA,CAACP,aAAa,GAAE,CAAC,IAAC,EAAQ,CAAC,CAChGoB,GAAG,eAAIX,KAAA,WAAQyE,OAAO,CAAEZ,oBAAqB,CAACa,KAAK,CAAE,CAAE3D,KAAK,CAAE,KAAK,CAAE4D,MAAM,CAAE,SAAS,CAAE,CAAAZ,QAAA,EAAC,GAAC,cAAAjE,IAAA,CAACN,eAAe,GAAE,CAAC,IAAC,EAAQ,CAAC,EACrH,CAAC,EACH,CAAC,CACLmB,GAAG,eACFb,IAAA,QAAKgE,SAAS,CAAC,iBAAiB,CAAAC,QAAA,cAC9BjE,IAAA,QAAK8E,GAAG,CAAEjE,GAAI,CAACkE,GAAG,CAAC,YAAY,CAC7BH,KAAK,CAAE,CAAEI,QAAQ,CAAE,UAAU,CAC7B;AACE;AACAC,IAAI,CAAEb,MAAM,CAACC,UAAU,CAAG,GAAG,CAAG,CAAC,CAAG,EAAE,CACtCa,GAAG,CAAEd,MAAM,CAACC,UAAU,CAAG,GAAG,CAAG,EAAE,CAAG,EAAE,CACtCc,MAAM,CAAE,CAAE,CAAE,CACf,CAAC,CACC,CACN,EAGE,CAAC,CAEV,CAEA,cAAe,CAAAhF,WAAW,CAG1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}